<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prescription PDF</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anek+Bangla:wdth,wght@75..125,100..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              light: "#429394",
              DEFAULT: "#357a7b",
              dark: "#135556"
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Define units outside the media query for better engine support */
    :root {
      --top-m: <%=(pConfig.isHeaderBlank && pConfig.headerHeight) ? pConfig.headerHeight + 'px': (pConfig.margin?.top ? pConfig.margin.top + 'cm' : '1cm') %>;
      --bottom-m: <%=pConfig.margin?.bottom ? pConfig.margin.bottom + 'cm': '1cm'%>;
      --left-m: <%=pConfig.margin?.left ? pConfig.margin.left + 'cm': '1cm'%>;
      --right-m: <%=pConfig.margin?.right ? pConfig.margin.right + 'cm': '1cm'%>;
      /* Reserving space for the actual footer content (approx 80px-100px) */
      --footer-height: 100px;
    }

    @media print {
      @page {
        size: A4;
        margin: 0 !important;
      }

      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        margin: 0;
        padding: 0;
      }

      .print-table {
        width: 100%;
        border-collapse: collapse;
        /* Ensures the table respects the heights we give it */
        table-layout: fixed;
      }

      /* Force the thead and tfoot cells to take up the margin space */
      .print-header-space {
        height: var(--top-m);
      }

      .print-footer-space {
        /* We need the margin PLUS the height of the fixed footer */
        height: calc(var(--bottom-m) + var(--footer-height));
      }

      .print-footer {
        position: fixed;
        bottom: var(--bottom-m);
        /* This keeps it above the bottom margin */
        left: var(--left-m);
        right: var(--right-m);
        height: var(--footer-height);
        background: white;
        z-index: 9999;
      }

      .content-area {
        padding-left: var(--left-m);
        padding-right: var(--right-m);
      }

      /* Prevent rows from breaking awkwardly */
      tr {
        page-break-inside: avoid;
        page-break-after: auto;
      }
    }
  </style>
</head>

<body>
  <table class="print-table">
    <thead>
      <tr>
        <td>
          <div class="print-header-space"></div>
        </td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          <div class="content-area">
            <div class="prescription-wrap">
              <% if (!pConfig.isHeaderBlank) { %>
              <%- include('./prescription-pdf/doctor-clinic.ejs') %>
              <% } %>

              <%- include('./prescription-pdf/patient.ejs') %>

              <div class="grid grid-cols-12 gap-5 mt-5 divide-x divide-slate-700">
                <div class="col-span-5 flex flex-col gap-3">
                  <%- include('./prescription-pdf/patient-area.ejs') %>
                  <%- include('./prescription-pdf/chief-complaint.ejs') %>
                  <%- include('./prescription-pdf/history.ejs') %>
                  <%- include('./prescription-pdf/on-examination.ejs') %>
                  <%- include('./prescription-pdf/distress-levels.ejs') %>
                  <%- include('./prescription-pdf/finding.ejs') %>
                  <%- include('./prescription-pdf/diagnosis.ejs') %>
                  <%- include('./prescription-pdf/investigation.ejs') %>
                </div>

                <div class="col-span-7 pl-5 flex flex-col gap-3">
                  <%- include('./prescription-pdf/medicine.ejs') %>
                  <%- include('./prescription-pdf/well-being.ejs') %>
                  <%- include('./prescription-pdf/treatment-plan.ejs') %>
                  <%- include('./prescription-pdf/advice.ejs') %>
                  <%- include('./prescription-pdf/escalation.ejs') %>
                  <%- include('./prescription-pdf/followup-tag.ejs') %>
                  <%- include('./prescription-pdf/reffered-to.ejs') %>
                </div>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>

    <tfoot>
      <tr>
        <td>
          <div class="print-footer-space"></div>
        </td>
      </tr>
    </tfoot>
  </table>

  <div class="print-footer">
    <%- include('./prescription-pdf/footer.ejs') %>
  </div>
</body>

</html>