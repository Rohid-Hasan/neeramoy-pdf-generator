<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prescription PDF</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anek+Bangla:wdth,wght@75..125,100..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              light: "#429394",
              DEFAULT: "#357a7b",
              dark: "#135556"
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Embed Anek Bangla Variable Font */
    @font-face {
      font-family: 'Anek Bangla';
      src: url('<%= fontAnekBangla %>') format('truetype-variations');
      font-weight: 100 800;
      font-stretch: 75% 125%;
      font-style: normal;
      font-display: block;
    }

    body {
      /* Anek Bangla is now the primary and only font */
      font-family: "Anek Bangla", sans-serif !important;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: <%=pConfig.baseFontSize || 12 %>px;
    }

    @media print {
      @page {
        size: A4;
        margin: 0 !important;
      }

      body {
        /* Use Padding to simulate margins and clear browser headers/footers */
        padding-top: <%=(pConfig.isHeaderBlank && pConfig.headerHeight) ? pConfig.headerHeight + 'px': (pConfig.margin?.top ? pConfig.margin.top + 'cm' : '1cm') %>;
        padding-bottom: <%=pConfig.margin?.bottom ? pConfig.margin.bottom + 'cm': '1cm'%>;
        padding-left: <%=pConfig.margin?.left ? pConfig.margin.left + 'cm': '1cm'%>;
        padding-right: <%=pConfig.margin?.right ? pConfig.margin.right + 'cm': '1cm'%>;

        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }

    /* THE CORE FIX: Flexbox Layout */
    .prescription-container {
      display: flex;
      flex-direction: column;
      /* 100vh is one full page. We subtract top and bottom padding. */
      min-height: calc(100vh - (var(--top-m) + var(--bottom-m)));
    }

    .main-content {
      flex-grow: 1;
    }

    .prescription-wrap {
      width: 100%;
      display: flex;
      flex-direction: column;
    }
  </style>
</head>

<body>
  <div class="flex flex-col" id="print-section">
    <div class="prescription-container">
      <div class="main-content">
        <% if (!pConfig.isHeaderBlank) { %>
        <%- include('./prescription-pdf/doctor-clinic.ejs') %>
        <% } %>

        <%- include('./prescription-pdf/patient.ejs') %>

        <div class="grid grid-cols-12 gap-5 mt-5 divide-x divide-slate-700">
          <div class="col-span-5 flex flex-col gap-3">
            <%- include('./prescription-pdf/patient-area.ejs') %>
            <%- include('./prescription-pdf/chief-complaint.ejs') %>
            <%- include('./prescription-pdf/history.ejs') %>
            <%- include('./prescription-pdf/on-examination.ejs') %>
            <%- include('./prescription-pdf/distress-levels.ejs') %>
            <%- include('./prescription-pdf/finding.ejs') %>
            <%- include('./prescription-pdf/diagnosis.ejs') %>
            <%- include('./prescription-pdf/investigation.ejs') %>
          </div>

          <div class="col-span-7 pl-5 flex flex-col gap-3">
            <%- include('./prescription-pdf/medicine.ejs') %>
            <%- include('./prescription-pdf/well-being.ejs') %>
            <%- include('./prescription-pdf/treatment-plan.ejs') %>
            <%- include('./prescription-pdf/advice.ejs') %>
            <%- include('./prescription-pdf/escalation.ejs') %>
            <%- include('./prescription-pdf/followup-tag.ejs') %>
            <%- include('./prescription-pdf/reffered-to.ejs') %>
          </div>
        </div>
      </div>
      <%- include('./prescription-pdf/footer.ejs') %>
    </div>
  </div>
</body>

</html>